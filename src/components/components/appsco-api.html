<link rel="import" href="../../../bower_components/polymer/polymer.html">

<!--
`appsco-api`
appsco-api is element that holds overlay and loader.

Example:

      <appsco-api></appsco-api>

@demo demo/appsco-api.html
-->

<dom-module id="appsco-api">
    <template>
    </template>
</dom-module>

<script>
    Polymer({
        is: 'appsco-api',

        properties: {

            domain: {
                type: String,
                value: "https://appsco.com",
                reflectToAttribute: true
            },

            index: {
                type: String,
                value: ''
            },

            me: {
                type: String,
                computed: '_me(index, domain)'
            },

            dashboards: {
                type: String,
                computed: '_dashboards(index, domain)'
            },

            applicationTemplates: {
                type: String,
                computed: '_applicationTemplates(index, domain)'
            },

            link: {
                type: String,
                computed: '_link(index, domain)'
            },

            item: {
                type: String,
                computed: '_item(index, domain)'
            },

            notifications: {
                type: String,
                computed: '_notifications(index, domain)'
            },

            checkNewNotifications: {
                type: String,
                computed: '_checkNewNotifications(index, domain)'
            },

            notificationsSeen: {
                type: String,
                computed: '_notificationsSeen(index, domain)'
            },

            accounts: {
                type: String,
                computed: '_accounts(index, domain)'
            },

            icons: {
                type: String,
                computed: '_icons(index, domain)'
            },

            personalItems: {
                type: String,
                computed: '_personalItems(index, domain)'
            },

            sharedWithMeItems: {
                type: String,
                computed: '_sharedWithMeItems(index, domain)'
            },

            logout: {
                type: String,
                computed: '_logout(index, domain)'
            },

            authorizedApps: {
                type: String,
                computed: '_authorizedApps(index, domain)'
            },

            twoFA: {
                type: String,
                computed: '_twoFA(index, domain)'
            },

            twoFAQr: {
                type: String,
                computed: '_twoFAQr(index, domain)'
            },

            twoFACodes: {
                type: String,
                computed: '_twoFACodes(index, domain)'
            },

            transferToken: {
                type: String,
                computed: '_transferToken(index, domain)'
            },

            changePassword: {
                type: String,
                computed: '_changePassword(index, domain)'
            },

            removeAccount: {
                type: String,
                computed: '_removeAccount(index, domain)'
            },

            accountLog: {
                type: String,
                computed: '_accountLog(index, domain)'
            },

            partner: {
                type: String,
                computed: '_partner(index, domain)'
            },

            profileImage: {
                type: String,
                computed: '_profileImage(index, domain)'
            },

            companies: {
                type: String,
                computed: '_companies(index, domain)'
            },

            upgradeToBusiness: {
                type: String,
                computed: '_upgradeToBusiness(index, domain)'
            },

            companiesAccountIsContactInApi: {
                type: String,
                computed: '_computeCompaniesAccountIsContactInApi(me)'
            },

            isUserLoggedInApi: {
                type: String,
                computed: '_computeIsUserLoggedInApi(me)'
            },

            isUserPassing2FAVerificationApi: {
                type: String,
                computed: '_computeIsUserPassing2FAVerificationApi(me)'
            },

            loginURL: {
                type: String,
                computed: '_computeLoginURL(index, domain)'
            },

            setupTwoFAURL: {
                type: String,
                computed: '_computeSetupTwoFAURL(index, domain)'
            },

            saveClientDataApi: {
                type: String,
                computed: '_computeSaveClientDataApi(me)'
            },

            partners: {
                type: String,
                computed: '_computePartners(index, domain)'
            },

            foldersApi: {
                type: String,
                computed: '_computeFoldersApi(index, domain)'
            },

            getUserPrivilegesApi: {
                type: String,
                computed: '_computeGetUserPrivilegesApi(me)'
            },

            tutorialsApi: {
                type: String,
                computed: '_computeTutorialsApi(me)'
            },

            pageConfigApi: {
                type: String,
                computed: '_computePageConfigApi(me)'
            },

            name: {
                type: Object,
                value: function () {
                    return {
                        me: this.me,
                        dashboards: this.dashboards,
                        applicationTemplates: this.applicationTemplates,
                        link: this.link,
                        item: this.item,
                        notifications: this.notifications,
                        checkNewNotifications: this.checkNewNotifications,
                        notificationsSeen: this.notificationsSeen,
                        accounts: this.accounts,
                        icons: this.icons,
                        personalItems: this.personalItems,
                        sharedWithMeItems: this.sharedWithMeItems,
                        logout: this.logout,
                        authorizedApps: this.authorizedApps,
                        twoFA: this.twoFA,
                        twoFAQr: this.twoFAQr,
                        twoFACodes: this.twoFACodes,
                        transferToken: this.transferToken,
                        changePassword: this.changePassword,
                        removeAccount: this.removeAccountApi,
                        accountLog: this.accountLog,
                        partner: this.partner,
                        profileImage: this.profileImage,
                        companies: this.companies,
                        upgradeToBusiness: this.upgradeToBusiness,
                        companiesAccountIsContactInApi: this.companiesAccountIsContactInApi,
                        isUserLoggedInApi: this.isUserLoggedInApi,
                        isUserPassing2FAVerificationApi: this.isUserPassing2FAVerificationApi,
                        loginURL: this.loginURL,
                        setupTwoFAURL: this.setupTwoFAURL,
                        saveClientDataApi: this.saveClientDataApi,
                        partners: this.partners,
                        foldersApi: this.foldersApi,
                        getUserPrivilegesApi: this.getUserPrivilegesApi,
                        tutorialsApi: this.tutorialsApi,
                        pageConfigApi: this.pageConfigApi
                    }
                },
                notify: true
            }
        },
        attached: function () {
            this.name = {
                me: this.me,
                dashboards: this.dashboards,
                applicationTemplates: this.applicationTemplates,
                link: this.link,
                item: this.item,
                notifications: this.notifications,
                checkNewNotifications: this.checkNewNotifications,
                notificationsSeen: this.notificationsSeen,
                accounts: this.accounts,
                icons: this.icons,
                personalItems: this.personalItems,
                sharedWithMeItems: this.sharedWithMeItems,
                logout: this.logout,
                authorizedApps: this.authorizedApps,
                twoFA: this.twoFA,
                twoFAQr: this.twoFAQr,
                twoFACodes: this.twoFACodes,
                transferToken: this.transferToken,
                changePassword: this.changePassword,
                removeAccount: this.removeAccount,
                accountLog: this.accountLog,
                partner: this.partner,
                profileImage: this.profileImage,
                companies: this.companies,
                upgradeToBusiness: this.upgradeToBusiness,
                companiesAccountIsContactInApi: this.companiesAccountIsContactInApi,
                isUserLoggedInApi: this.isUserLoggedInApi,
                isUserPassing2FAVerificationApi: this.isUserPassing2FAVerificationApi,
                loginURL: this.loginURL,
                setupTwoFAURL: this.setupTwoFAURL,
                saveClientDataApi: this.saveClientDataApi,
                partners: this.partners,
                foldersApi: this.foldersApi,
                getUserPrivilegesApi: this.getUserPrivilegesApi,
                tutorialsApi: this.tutorialsApi,
                pageConfigApi: this.pageConfigApi
            };
        },

        _computeOrigin: function (domain, index) {
            return domain+'/'+(index == '' ? '' : index + '/' )+'api/v2';
        },

        _me: function (index, domain) {
            return this._computeOrigin(domain, index)+'/me';
        },

        _dashboards: function (index, domain) {
            return this._computeOrigin(domain, index)+'/dashboards';
        },

        _applicationTemplates: function (index, domain) {
            return this._computeOrigin(domain, index)+'/applications';
        },

        _link: function (index, domain) {
            return this._computeOrigin(domain, index)+'/applications/link';
        },

        _item: function (index, domain) {
            return this._computeOrigin(domain, index)+'/applications/item';
        },

        _notifications: function (index, domain) {
            return this._computeOrigin(domain, index)+'/notifications';
        },

        _checkNewNotifications: function (index, domain) {
            return this._computeOrigin(domain, index)+'/notifications/new-notifications';
        },

        _notificationsSeen: function (index, domain) {
            return this._computeOrigin(domain, index)+'/me/notifications-seen';
        },

        _accounts: function (index, domain) {
            return this._computeOrigin(domain, index)+'/accounts';
        },

        _icons: function (index, domain) {
            return this._computeOrigin(domain, index)+'/me/icons';
        },

        _personalItems: function (index, domain) {
            return this._computeOrigin(domain, index) + '/me/icons/personal';
        },

        _sharedWithMeItems: function (index, domain) {
            return this._computeOrigin(domain, index) + '/me/icons/shared-with-me';
        },

        _logout: function (index, domain) {
            return domain + '/' + (index == '' ? '' : index + '/' ) + 'logout';
        },

        _authorizedApps: function(index, domain) {
            return this._computeOrigin(domain, index) + '/me/authorized-apps';
        },

        _twoFA: function(index, domain) {
            return this._computeOrigin(domain, index) + '/me/2fa';
        },

        _twoFAQr: function(index, domain) {
            return this._computeOrigin(domain, index) + '/me/2fa/qr';
        },

        _twoFACodes: function(index, domain) {
            return this._computeOrigin(domain, index) + '/me/2fa/codes';
        },

        _transferToken: function(index, domain) {
            return this._computeOrigin(domain, index) + '/me/transfer-token';
        },

        _changePassword: function(index, domain) {
            return this._computeOrigin(domain, index) + '/me/change-password';
        },

        _removeAccount: function(index, domain) {
            return this._computeOrigin(domain, index) + '/accounts/remove';
        },

        _accountLog: function(index, domain) {
            return this._computeOrigin(domain, index) + '/me/log';
        },

        _partner: function(index, domain) {
            return this._computeOrigin(domain, index) + '/me/partner';
        },

        _profileImage: function(index, domain) {
            return this._computeOrigin(domain, index) + '/me/profile-image';
        },

        _companies: function(index, domain) {
            return this._computeOrigin(domain, index) + '/companies';
        },

        _upgradeToBusiness: function(index, domain) {
            return this._computeOrigin(domain, index) + '/company';
        },

        _computeCompaniesAccountIsContactInApi: function(me) {
            return me ? (me + '/contact/companies?extended=1') : null;
        },

        _computeIsUserLoggedInApi: function(me) {
            return me ? (me + '/is-logged-in') : null;
        },

        _computeIsUserPassing2FAVerificationApi: function(me) {
            return me ? (me + '/is-passing-2fa-verification') : null;
        },

        _computeLoginURL: function (index, domain) {
            return domain ? (domain + '/' + (index == '' ? '' : index + '/' ) + 'login') : null;
        },

        _computeSetupTwoFAURL: function (index, domain) {
            return domain ? (domain + '/' + (index == '' ? '' : index + '/' ) + 'force/configure-2fa') : null;
        },

        _computeSaveClientDataApi: function (me) {
            return me ? (me + '/byod/register') : null;
        },

        _computePartners: function(index, domain) {
            return this._computeOrigin(domain, index) + '/partners';
        },

        _computeFoldersApi: function(index, domain) {
            return this._computeOrigin(domain, index) + '/dashboard-groups';
        },

        _computeGetUserPrivilegesApi: function (me) {
            return me ? (me + '/acl') : null;
        },

        _computeTutorialsApi: function (me) {
            return me ? (me + '/tutorial') : null;
        },

        _computePageConfigApi: function(me) {
            return me ? (me + '/page-config') : null;
        }
    });
</script>
